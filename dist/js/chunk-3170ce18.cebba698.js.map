{"version":3,"sources":["webpack:///./src/components/widgets/stacked_bar.vue?742a","webpack:///src/components/widgets/stacked_bar.vue","webpack:///./src/components/widgets/stacked_bar.vue?844f","webpack:///./src/components/widgets/stacked_bar.vue","webpack:///./src/assets/plot_js/plot_GL.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","name","props","components","mounted","fig_opt","fig_size","fig_margin","font","showlegend","legend","xanchor","yanchor","x","y","card_data","app_data","plot_data","filter","console","log","plotting","draw","data","computed","is_update","lakes","prev_filter","watch","update","methods","layout","barmode","plot_animation","component","VContainer","Plotting","div_name","color_theme","year","plotly_config","displaylogo","responsive","displayModeBar","staticPlot","editable","layout_default","margin","height","autosize","xaxis","autotick","dtick","yaxis","Plotly","purge","layout_config","Object","assign","y0","map","error_y","i","length","index","indexOf","parseInt","trace_data_0","type","trace_data","marker","color","rgba","line","rgb","width","array","visible","thickness","fig_layout_config","range","max_val","set_layout","newPlot","animate","traces","transition","duration","easing","mode","size","addTraces","values","labels","colors","trace","all_data","entries","key","value","temp_data","push","max_y","trace_0","Array","from","keys"],"mappings":"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","file":"js/chunk-3170ce18.cebba698.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('div',{staticClass:\"mx-0\",attrs:{\"id\":\"stack_bar\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container>\r\n\r\n      <div class=\"mx-0\" id=\"stack_bar\"></div>\r\n\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport plotting from \"@/assets/plot_js/plot_GL\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  name: \"stacked_bar\",\r\n  props: [\"card_name\"],\r\n  components: {},\r\n  mounted() {\r\n    var fig_opt = {\r\n      fig_size: { width: 450, height: 450 },\r\n      fig_margin: { r: 25, t: 10, b: 25, l: 50 },\r\n      font: { size: 18 },\r\n      showlegend: true,\r\n      legend: {\r\n        font: { size: 14 },\r\n        xanchor: \"auto\",\r\n        yanchor: \"auto\",\r\n        x: 1,\r\n        y: 1,\r\n      },\r\n    };\r\n    this.card_data = this.app_data.plot_data.filter(\r\n      (x) => x.name == this.card_name\r\n    )[0];\r\n    console.log(this.card_data)\r\n    this.plotting = new plotting(\"stack_bar\", fig_opt);\r\n    this.draw();\r\n  },\r\n  data: () => ({\r\n    card_data: {\r\n      chemical: \"\",\r\n      trend: 0,\r\n    },\r\n  }),\r\n  computed: {\r\n    ...mapState({\r\n      lakes: \"lakes\",\r\n      app_data: \"app_data\",\r\n    }),\r\n    is_update() {\r\n      return this.lakes.prev_filter;\r\n    },\r\n  },\r\n  watch: {\r\n    is_update() {\r\n      this.card_data = this.app_data.plot_data.filter(\r\n        (x) => x.name == this.card_name\r\n      )[0];\r\n      this.draw();\r\n      this.lakes.update = false;\r\n    },\r\n  },\r\n  methods: {\r\n    draw() {\r\n      var layout;\r\n      layout = {\r\n        barmode: \"stack\",\r\n      };\r\n      this.plotting.plot_animation(this.card_data, layout);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stacked_bar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stacked_bar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stacked_bar.vue?vue&type=template&id=d5fa1f5a&scoped=true&\"\nimport script from \"./stacked_bar.vue?vue&type=script&lang=js&\"\nexport * from \"./stacked_bar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d5fa1f5a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VContainer})\n","\r\nimport Plotly from 'plotly.js'\r\n\r\n// function covert_rgb(hex, alpha) {\r\n//     if (hex.length === 3) {\r\n//         hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\r\n//     }\r\n\r\n//     const r = parseInt(hex.substring(0, 2), 16);\r\n//     const g = parseInt(hex.substring(2, 4), 16);\r\n//     const b = parseInt(hex.substring(4, 6), 16);\r\n\r\n//     return `rgba(${r},${g},${b},${alpha})`;\r\n// }\r\n\r\n// function getRandomInt(max) {\r\n//     return Math.floor(Math.random() * Math.floor(max));\r\n//   }\r\n\r\n\r\nexport default class Plotting {\r\n    // fig_opt = {\r\n    //     fig_size: { width: 1180, height: 600 },\r\n    //     fig_margin: { r: 100, t: 50, b: 75, l: 125 },\r\n    //     font: { size: 14 },\r\n    //     showlegend: true,\r\n    //     legend:{ font: { size: 12 }, xanchor: \"auto\", yanchor: \"auto\", x: 1, y: 0 }\r\n    // }\r\n    constructor(div_name, fig_opt) {\r\n        this.div_name = div_name\r\n        this.fig_size = fig_opt.fig_size\r\n        this.fig_margin = fig_opt.fig_margin\r\n        this.color_theme = [\r\n            '1E88E5',\r\n            '28965A',\r\n            'E53E20',\r\n            '7CB342',\r\n            'd95282',\r\n            'FBC02D',\r\n            '00B8DC',\r\n            '232322',\r\n            'AAAAAA',\r\n        ]\r\n        this.year = [2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015]\r\n        this.plotly_config = {\r\n            displaylogo: false,\r\n            responsive: true,\r\n            displayModeBar: false,\r\n            staticPlot: false,\r\n            editable: false\r\n        }\r\n        this.layout_default = {\r\n            margin: this.fig_margin,\r\n            // width: this.fig_size.width,\r\n            height: this.fig_size.height,\r\n            font: fig_opt.font,\r\n            showlegend: fig_opt.showlegend,\r\n            legend: fig_opt.legend,\r\n            autosize: true,\r\n            xaxis: {\r\n                autotick: true,\r\n                dtick: 2\r\n            },\r\n            yaxis: {\r\n                autotick: true,\r\n                dtick: 50\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        Plotly.purge(this.div_name)\r\n    }\r\n\r\n    set_layout(layout_config) {\r\n        return Object.assign(this.layout_default, layout_config)\r\n    }\r\n\r\n    plot_bar(data, layout_config = {}) {\r\n        var x = this.year\r\n        var y0 = this.year.map(() => 0)\r\n        var y = this.year.map(() => 0)\r\n        var error_y = this.year.map(() => 0)\r\n        for (var i = 0; i < data.y.length; i++) {\r\n            var index = this.year.indexOf(parseInt(data.x[i]))\r\n            if (index >= 0) {\r\n                y[index] = data.y[i]\r\n                error_y[index] = data.error_y[i]\r\n            }\r\n            else {\r\n                y[index] = 0\r\n                error_y[index] = 0\r\n            }\r\n        }\r\n        var trace_data_0 = [{\r\n            x: x,\r\n            y: y0,\r\n            type: 'bar',\r\n        }];\r\n\r\n        var trace_data = [{\r\n            x: x,\r\n            y: y,\r\n            type: 'bar',\r\n            marker: {\r\n                color: data.color.rgba,\r\n                line: {\r\n                    color: data.color.rgb,\r\n                    width: 0.7,\r\n                }\r\n            },\r\n            error_y: {\r\n                type: 'data',\r\n                array: error_y,\r\n                visible: true,\r\n                color: data.color.rgb,\r\n                thickness: 0.5,\r\n                width: 3,\r\n            },\r\n        }];\r\n\r\n        var fig_layout_config = {\r\n            yaxis: { range: [0, data.max_val + 100] }\r\n        }\r\n\r\n        Object.assign(fig_layout_config, layout_config)\r\n        var layout = this.set_layout(fig_layout_config)\r\n        Plotly.newPlot(this.div_name, trace_data_0, layout, this.plotly_config);\r\n        Plotly.animate(this.div_name, {\r\n            data: trace_data,\r\n            traces: [0],\r\n            layout: {\r\n                yaxis: { range: [0, data.max_val + 100] }\r\n            }\r\n        }, {\r\n            transition: {\r\n                duration: 500,\r\n                easing: 'cubic-in-out'\r\n            },\r\n        })\r\n    }\r\n\r\n    plot_scatter(x, y, layout_config = {}) {\r\n        var trace_data = [{\r\n            x: x,\r\n            y: y,\r\n            mode: 'markers',\r\n            type: 'scatter',\r\n            marker: {\r\n                size: 4,\r\n            }\r\n\r\n        }];\r\n        var fig_layout_config = {\r\n        }\r\n        console.log(trace_data)\r\n        Object.assign(fig_layout_config, layout_config)\r\n        // var layout = this.set_layout(fig_layout_config)\r\n        Plotly.addTraces(this.div_name, trace_data);\r\n        // Plotly.animate(this.div_name, {\r\n        //     data: trace_data,\r\n        //     traces: [1],\r\n        //     layout: {}\r\n        //   }, {\r\n        //     transition: {\r\n        //       duration: 500,\r\n        //       easing: 'cubic-in-out'\r\n        //     },\r\n        //     frame: {\r\n        //       duration: 500\r\n        //     }\r\n        //   })\r\n\r\n    }\r\n\r\n    plot_pie(data, layout_config = {}) {\r\n\r\n        var trace_data_0 = [{\r\n            values: data.values.map(() => 0),\r\n            labels: data.labels,\r\n            type: 'pie',\r\n        }];\r\n\r\n        var trace_data = [{\r\n            values: data.values,\r\n            labels: data.labels,\r\n            type: 'pie',\r\n            marker: {\r\n                colors: data.color,\r\n            },\r\n        }];\r\n\r\n        var fig_layout_config = {\r\n            yaxis: { range: [0, data.max_val + 100] }\r\n        }\r\n\r\n        Object.assign(fig_layout_config, layout_config)\r\n        var layout = this.set_layout(fig_layout_config)\r\n        Plotly.newPlot(this.div_name, trace_data_0, layout, this.plotly_config);\r\n        Plotly.animate(this.div_name, {\r\n            data: trace_data,\r\n            traces: [0],\r\n        }, {\r\n            transition: {\r\n                duration: 500,\r\n                easing: \"quadratic-in-out\"\r\n            },\r\n        })\r\n    }\r\n\r\n    plot_general(data, layout_config = {}) {\r\n        var layout = this.set_layout(layout_config)\r\n        Plotly.newPlot(this.div_name, data.trace, layout, this.plotly_config);\r\n    }\r\n\r\n\r\n    plot_stacked_bar(all_data, layout_config = {}) {\r\n        var x = this.year\r\n        var y0 = this.year.map(() => 0)\r\n        var trace_data_0 = [\r\n            { x: x, y: y0, type: 'bar' },\r\n            { x: x, y: y0, type: 'bar' },\r\n            { x: x, y: y0, type: 'bar' },\r\n            { x: x, y: y0, type: 'bar' },\r\n            { x: x, y: y0, type: 'bar' },\r\n            { x: x, y: y0, type: 'bar' },];\r\n\r\n        var trace_data = []\r\n\r\n        for (const [key, value] of Object.entries(all_data)) {\r\n            // console.log(value)\r\n            var y = this.year.map(() => 0)\r\n            var error_y = this.year.map(() => 0)\r\n\r\n            for (var i = 0; i < value.y.length; i++) {\r\n                var index = this.year.indexOf(parseInt(value.x[i]))\r\n                if (index >= 0) {\r\n                    y[index] = value.y[i]\r\n                    error_y[index] = value.error_y[i]\r\n                }\r\n                else {\r\n                    y[index] = 0\r\n                    error_y[index] = 0\r\n                }\r\n            }\r\n\r\n            var temp_data = {\r\n                x: x,\r\n                y: y,\r\n                type: 'bar',\r\n                marker: {\r\n                    color: value.color.rgba,\r\n                    line: {\r\n                        color: value.color.rgb,\r\n                        width: 0.7,\r\n                    }\r\n                },\r\n                name: key,\r\n                error_y: {\r\n                    type: 'data',\r\n                    array: error_y,\r\n                    visible: true,\r\n                    color: value.color.rgb,\r\n                    thickness: 0.5,\r\n                    width: 3,\r\n                },\r\n            };\r\n\r\n            trace_data.push(temp_data)\r\n        }\r\n\r\n        var fig_layout_config = {\r\n            yaxis: { range: [0, 2000] },\r\n            barmode: 'stack'\r\n        }\r\n\r\n\r\n        Object.assign(fig_layout_config, layout_config)\r\n        var layout = this.set_layout(fig_layout_config)\r\n        Plotly.newPlot(this.div_name, trace_data_0, layout, this.plotly_config);\r\n        Plotly.animate(this.div_name, {\r\n            data: trace_data,\r\n            traces: [0, 1, 2, 3, 4, 5],\r\n            layout: {\r\n                yaxis: { range: [0, 2000] }\r\n            }\r\n        }, {\r\n            transition: {\r\n                duration: 500,\r\n                easing: 'cubic-in-out'\r\n            },\r\n        })\r\n    }\r\n\r\n    plot_animation(data, layout_config = {}){\r\n        console.log(data)\r\n        var fig_layout_config = {\r\n            yaxis: { range: [0, data.max_y] },\r\n            barmode: 'stack'\r\n        }\r\n        Object.assign(fig_layout_config, layout_config)\r\n        var layout = this.set_layout(fig_layout_config)\r\n        Plotly.newPlot(this.div_name, data.trace_data.trace_0,layout, this.plotly_config);\r\n\r\n        var traces = Array.from(Array(data.trace_data.trace.length).keys())\r\n        Plotly.animate(this.div_name, {\r\n            data: data.trace_data.trace,\r\n            traces: traces,\r\n            layout:{ range: [0, data.max_y] }\r\n        }, {\r\n            transition: {\r\n                duration: 500,\r\n                easing: 'cubic-in-out'\r\n            },\r\n        })\r\n\r\n\r\n    }\r\n}\r\n\r\n"],"sourceRoot":""}